<template>
	<div
		class='relative rounded-lg border p-4 bg-white hover:brightness-95 active:scale-95 transition overflow-hidden'
	>
		<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800' class='absolute right-0 bottom-0 translate-y-1/3 translate-x-1/3 object-cover'>
			<defs>
				<linearGradient x1='50%' y1='0%' x2='50%' y2='100%' id='quiz-card-gyrate-grad-1'>
					<stop stop-color='#6366f1' stop-opacity='1' offset='0%'></stop>
					<stop stop-color='#e11d48' stop-opacity='1' offset='100%'></stop>
				</linearGradient>
			</defs>
			<g stroke-width='5' stroke='url(#quiz-card-gyrate-grad-1)' fill='none'>
				<path
					d='M380.5021012135235 68.8367326999595C388.4888849102814 52.69456449296072 411.51105405456235 52.69456449296072 419.4978377513203 68.8367326999595L737.715556992356 711.8666384835761C744.8702140935378 726.3255179237062 734.3516988265782 743.269899678728 718.2176887234577 743.269899678728H81.78225024138607C65.64824013826552 743.269899678728 55.12972487130611 726.3255179237062 62.28438197248761 711.8666384835761L380.5021012135235 68.8367326999595Z '
					transform='rotate(25.5, 400, 400)' opacity='0.05'></path>
				<path
					d='M381.6490651586837 88.31689796680473C389.1660380497501 73.12426906609997 410.8339619502499 73.12426906609997 418.3509348413163 88.31689796680473L717.8499647152321 693.5215151749145C724.5837596339915 707.129872295037 714.6839805592059 723.0775257115281 699.499029873916 723.0775257115281H100.50097012608398C85.31601944079404 723.0775257115281 75.41624036600871 707.129872295037 82.15003528476774 693.5215151749145L381.6490651586837 88.31689796680473Z '
					transform='rotate(24, 400, 400)' opacity='0.11'></path>
				<path
					d='M382.7959680686879 107.79712426880619C389.8431301540627 93.5540346743955 410.15680881078106 93.5540346743955 417.20397089615585 107.79712426880619L697.9843114029519 675.1764529014092C704.2972441392889 687.934287701524 695.0162012566775 702.8852127794844 680.7803099892182 702.8852127794844H119.2196289756256C104.9837377081663 702.8852127794844 95.70269482555506 687.934287701524 102.01562756189162 675.1764529014092L382.7959680686879 107.79712426880619Z '
					transform='rotate(22.5, 400, 400)' opacity='0.17'></path>
				<path
					d='M383.94293201384835 127.27728953565139C390.5202832935314 113.98373924753474 409.4797167064686 113.98373924753474 416.05706798615165 127.27728953565139L678.1187191258281 656.8313295927475C684.0107896797425 668.7386420728546 675.3484829893052 682.6928388122843 662.0616511396765 682.6928388122843H137.93834886032346C124.65151701069476 682.6928388122843 115.9892103202576 668.7386420728546 121.88128087417175 656.8313295927475L383.94293201384835 127.27728953565139Z '
					transform='rotate(21, 400, 400)' opacity='0.23'></path>
				<path
					d='M385.08983492385244 146.75751583765285C391.19737539784387 134.41350485583027 408.8025635669999 134.41350485583027 414.9101040409913 146.75751583765285L658.253065813548 638.4862673192422C663.7242741850399 649.5430574793417 655.6807036867767 662.5005258802406 643.3429312549787 662.5005258802406H156.65700770986507C144.31923527806703 662.5005258802406 136.27566477980395 649.5430574793417 141.7468731512957 638.4862673192422L385.08983492385244 146.75751583765285Z '
					transform='rotate(19.5, 400, 400)' opacity='0.29'></path>
				<path
					d='M386.23679886901283 166.23769636328714C391.8745285373126 154.84322468775858 408.1254714626874 154.84322468775858 413.7632011309872 166.23769636328714L638.3874735364241 620.1411592693694C643.4378197254936 630.3474271094614 636.0129854194045 642.3081671718296 624.6242724054371 642.3081671718296H175.375727594563C163.98701458059554 642.3081671718296 156.56218027450655 630.3474271094614 161.61252646357582 620.1411592693694L386.23679886901283 166.23769636328714Z '
					transform='rotate(18, 400, 400)' opacity='0.35'></path>
				<path
					d='M387.3837322965951 185.71789214771047C392.5516511592032 175.27295977847598 407.4483488407968 175.27295977847598 412.6162677034049 185.71789214771047L618.5218507417221 601.7960664782859C623.1513347483691 611.1518119983701 616.3452366344541 622.1158237222078 605.9055830383172 622.1158237222078H194.09441696168273C183.65476336554588 622.1158237222078 176.84866525163096 611.1518119983701 181.47814925827782 601.7960664782859L387.3837322965951 185.71789214771047Z '
					transform='rotate(16.5, 400, 400)' opacity='0.41'></path>
				<path
					d='M388.5306504653883 205.19805741455568C393.22875852230476 195.70266435161523 406.7712109601171 195.70266435161523 411.46931901703357 205.19805741455568L598.6562126882311 583.4509431696243C602.8648345124556 591.9561663697009 596.6774725907146 601.9234497550078 587.1868784124085 601.9234497550078H212.8130910700134C203.3224968917072 601.9234497550078 197.13513496996637 591.9561663697009 201.34375679419077 583.4509431696243L388.5306504653883 205.19805741455568Z '
					transform='rotate(15, 400, 400)' opacity='0.47'></path>
				<path
					d='M389.67759915175964 224.67825319897904C393.90589640298447 216.1323994423326 406.09410359701553 216.1323994423326 410.32240084824036 224.67825319897904L578.7906051523181 565.1058503785407C582.5783647941201 572.7605512586097 577.0097390645533 581.731106305386 568.4682043040777 581.731106305386H231.53179569592226C222.99026093544666 581.731106305386 217.4216352058799 572.7605512586097 221.20939484768184 565.1058503785407L389.67759915175964 224.67825319897904Z '
					transform='rotate(13.5, 400, 400)' opacity='0.53'></path>
				<path
					d='M390.82453257934185 244.15844898340237C394.58301902487506 236.56213453305 405.41698097512494 236.56213453305 409.17546742065815 244.15844898340237L558.924982357616 546.7607575874572C562.2918798169958 553.5649361475184 557.3419902796029 561.538762855764 549.749514936958 561.538762855764H250.250485063042C242.65800972039705 561.538762855764 237.70812018300433 553.5649361475184 241.0750176423839 546.7607575874572L390.82453257934185 244.15844898340237Z '
					transform='rotate(12, 400, 400)' opacity='0.58'></path>
				<path
					d='M391.9714660069242 263.63864476782567C395.2601416467657 256.99186962376734 404.7398583532343 256.99186962376734 408.0285339930758 263.63864476782567L539.0593595629141 528.4156647963737C542.0053948398713 534.3693210364273 537.6742414946526 541.3464194061421 531.0308255698383 541.3464194061421H268.96917443016173C262.3257585053474 541.3464194061421 257.9946051601288 534.3693210364273 260.9406404370859 528.4156647963737L391.9714660069242 263.63864476782567Z '
					transform='rotate(10.5, 400, 400)' opacity='0.64'></path>
				<path
					d='M393.1183994345064 283.1188558110381C395.9372642686563 277.42161997327383 404.0627357313437 277.42161997327383 406.8816005654936 283.1188558110381L519.193736768212 510.0705872640792C521.7189098627468 515.1737211841253 518.0064927097022 521.1540912153093 512.3121362027185 521.1540912153093H287.68786379728147C281.99350729029777 521.1540912153093 278.2810901372533 515.1737211841253 280.8062632317879 510.0705872640792L393.1183994345064 283.1188558110381Z '
					transform='rotate(9, 400, 400)' opacity='0.70'></path>
				<path
					d='M394.2653328620887 302.5990363366724C396.61438689054694 297.85133980520214 403.38561310945306 297.85133980520214 405.7346671379113 302.5990363366724L499.3281139735101 491.7254792142067C501.4324248856223 495.978090814245 498.33874392475184 500.96173250689844 493.5934468355988 500.96173250689844H306.40655316440126C301.66125607524816 500.96173250689844 298.56757511437775 495.978090814245 300.6718860264899 491.7254792142067L394.2653328620887 302.5990363366724Z '
					transform='rotate(7.5, 400, 400)' opacity='0.76'></path>
				<path
					d='M395.4122662896709 322.0792244917012C397.29150951243753 318.281067266525 402.70849048756247 318.281067266525 404.5877337103291 322.0792244917012L479.462491178808 473.3803787937286C481.1459399084979 476.7824680737592 478.67099513980145 480.769381427882 474.874757468479 480.769381427882H325.125242531521C321.3290048601985 480.769381427882 318.85406009150216 476.7824680737592 320.5375088211919 473.3803787937286L395.4122662896709 322.0792244917012Z '
					transform='rotate(6, 400, 400)' opacity='0.82'></path>
				<path
					d='M396.5591997172532 341.5594202761245C397.9686321343282 338.7108023572424 402.0313678656718 338.7108023572424 403.4408002827468 341.5594202761245L459.596868384106 455.0352860026451C460.8594549313734 457.5868529626681 459.0032463548511 460.57703797826014 456.15606810135927 460.57703797826014H343.84393189864073C340.9967536451489 460.57703797826014 339.14054506862664 457.5868529626681 340.4031316158939 455.0352860026451L396.5591997172532 341.5594202761245Z '
					transform='rotate(4.5, 400, 400)' opacity='0.88'></path>
				<path
					d='M397.70613314483546 361.03962368994235C398.64575475621876 359.1405450773543 401.35424524378124 359.1405450773543 402.29386685516454 361.03962368994235L439.731245589404 436.6902008409561C440.57296995424895 438.3912454809714 439.3354975699007 440.38470215803284 437.4373787342395 440.38470215803284H362.56262126576047C360.6645024300993 440.38470215803284 359.4270300457511 438.3912454809714 360.268754410596 436.6902008409561L397.70613314483546 361.03962368994235Z '
					transform='rotate(3, 400, 400)' opacity='0.94'></path>
				<path
					d='M398.85306657241773 380.51980421557664C399.3228773781094 379.5702649092826 400.6771226218906 379.5702649092826 401.14693342758227 380.51980421557664L419.865622794702 418.3450927910835C420.2864849771245 419.1956151110912 419.6677487849504 420.1923434496219 418.71868936711974 420.1923434496219H381.28131063288026C380.3322512150496 420.1923434496219 379.7135150228755 419.1956151110912 380.134377205298 418.3450927910835L398.85306657241773 380.51980421557664Z '
					transform='rotate(1.5, 400, 400)' opacity='1.00'></path>
			</g>
		</svg>
		<div class='flex items-start space-x-4'>
			<div class='rounded-full border border-blue-600 bg-white p-2 w-fit'>
				<DocumentIcon class='h-4 w-4' />
			</div>
			<div class='space-y-2 flex-1'>
				<div class='space-y-1'>
					<h6 class='font-semibold font-display text-neutral-700'>{{ name }}</h6>
					<div class='flex items-center space-x-1'>
						<div v-for='area in areas'>
							<div
								class='rounded border px-1 text-xs font-medium text-neutral-500 bg-white'
							>
								{{ area?.attributes?.name }}
							</div>
						</div>
					</div>
				</div>
				<div>

				</div>
			</div>
		</div>
	</div>
</template>

<script setup>
import { DocumentIcon } from '@heroicons/vue/24/outline/index.js';
import { getQuiz } from '@/api/quiz.js';
import { computed, onUnmounted, toRefs, watch } from 'vue';

const props = defineProps({
	quizId: Number,
});

const { quizId } = toRefs(props);

const quizResponse = getQuiz(quizId, {
	fields: ['name'],
	populate: {
		areas: {
			fields: ['name'],
		},
	},
}, { immediate: false });

if (quizId.value) {
	quizResponse.execute();
}

watch(quizId, (newId) => {
	if (newId) {
		quizResponse.execute();
	}
});

const quiz = computed(() => {
	return quizResponse.data.value?.data?.attributes;
});

const name = computed(() => {
	return quiz.value?.name;
});

const areas = computed(() => {
	return quiz.value?.areas?.data;
});

onUnmounted(() => {
	if (quizResponse.canAbort.value) {
		quizResponse.abort();
	}
});
</script>